{"remainingRequest":"/Users/lisa/Desktop/study/all/my-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lisa/Desktop/study/all/my-project/src/components/about.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lisa/Desktop/study/all/my-project/src/components/about.vue","mtime":1584674594968},{"path":"/Users/lisa/Desktop/study/all/my-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/all/my-project/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/all/my-project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lisa/Desktop/study/all/my-project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhYm91dCIsCiAgLy8g6LCD55SoYXBwLnZ1Zee7hOS7tuS4reeahOaWueazlQogIGluamVjdDogWyJyZWxvYWQiXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIGFsbGNoZWNrOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldHByb2R1Y3QoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCIvZ29vZHNsaXN0Iik7CiAgICAgIHRoaXMubGlzdCA9IHJlcy5kYXRhOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2hvcHBpbmdjYXJ0IiwgSlNPTi5zdHJpbmdpZnkodGhpcy5saXN0KSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdCk7CiAgICB9LAogICAgZWRpdENhcnQoZmxhZyxpdGVtKSB7CiAgICAgIGlmIChmbGFnID09ICJhZGQiKSB7CiAgICAgICAgLy8g5re75Yqg5ZWG5ZOB5pWw6YePCiAgICAgICAgICBpdGVtLnByb2R1Y3ROdW0rKzsKICAgICAgICAgIGNvbnNvbGUubG9nKE51bWJlcihpdGVtLnByb2R1Y3ROdW0pICkKICAgICAgfSBlbHNlIGlmICgoZmxhZyA9PSJtaW51IikpIHsKICAgICAgICAvLyDlh4/lsJHllYblk4HmlbDph48KICAgICAgICBpZiAoaXRlbS5wcm9kdWN0TnVtIDw9IDEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaXRlbS5wcm9kdWN0TnVtLS07CiAgICAgICAgLy8gY29uc29sZS5sb2coTnVtYmVyKGl0ZW0ucHJvZHVjdE51bSkgKQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWVhuWTgeaOp+WItumAieS4rQogICAgICAgIGl0ZW0uY2hlY2tlZCA9IGl0ZW0uY2hlY2tlZCA9PSAiMSIgPyAiMSIgOiAiMCI7CiAgICAgIH0KICAgICAgdGhpcy4kaHR0cC5wb3N0KCIvY2FydEVkaXQiLCB7CiAgICAgICAgICBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdElkLAogICAgICAgICAgcHJvZHVjdE51bTogaXRlbS5wcm9kdWN0TnVtLAogICAgICAgICAgY2hlY2tlZDogaXRlbS5jaGVja2VkCiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBsZXQgcmVzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICB9KTsKICAgICAgICAKICAgIH0sCiAgICBjaGVja2FsbCgpIHsKICAgICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0LmNoZWNrZWQpOwogICAgICB0aGlzLmxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpdGVtLmNoZWNrZWQgPSBldmVudC50YXJnZXQuY2hlY2tlZDsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZGVsKGksIGlkKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKCIvY2FydERlbC8iK2lkKTsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgdGhpcy5yZWxvYWQoKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0b3RhbE1vbmV5KCkgewogICAgICBsZXQgYWxsbW9uZXkgPSAwOwogICAgICAvLyBsZXQgaXNBbGxDaGVjayA9IHRydWU7CiAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5saXN0KSB7CiAgICAgICAgaWYgKHRoaXMubGlzdFtpXS5jaGVja2VkKSB7CgogICAgICAgICAgYWxsbW9uZXkgKz0gdGhpcy5saXN0W2ldLnByb2R1Y3ROdW0gKiB0aGlzLmxpc3RbaV0uc2FsZVByaWNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBpc0FsbENoZWNrID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIHRoaXMuYWxsY2hlY2sgPT0gaXNBbGxDaGVjazsKICAgICAgcmV0dXJuIGFsbG1vbmV5OwogICAgfSwKICAgIC4uLm1hcEdldHRlcnMoewogICAgICAvLyDosIPnlKhnZXR0ZXJz5ou/5pWw5o2uLOaLv+WIsOeahOaYr2V4cHJlc3PkuK3nmoRkYXRhCiAgICAgIGNhcnRpbmZvOiAiR0VUQ0FSVCIKICAgIH0pCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gdGhpcy5faW5pdFBhZ2VEYXRhKCkKICAgIC8vIOWPkemAgeWtmOaVsOaNruaMh+S7pOiwg+eUqGFjdGlvbnPph4znmoTmlrnms5XvvIzlpoLmnpzmsqHlk5/ov5nmraXvvIzmmK/ojrflj5bkuI3liLDmlbDmja7nmoQKICAgIC8vICdJTklUQ0FSVCfmmK9hY3Rpb25z6YeM55qEW0lOSVRDQVJUXeeahOWunuS+iwogICAgLy8gc3RvcmXmmK9tYWluLmpz6YeM5a6a5LmJ55qE5a6e5L6L5YyW55qEdnVleAogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIklOSVRDQVJUIik7CiAgICB0aGlzLmdldHByb2R1Y3QoKQogICAgCiAgfSwKICB9Cgo="},{"version":3,"sources":["about.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"about.vue","sourceRoot":"src/components","sourcesContent":["<!--\n * @Author: your name\n * @Date: 2020-03-07 17:05:46\n * @LastEditTime: 2020-03-18 10:57:31\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /all/my-project/src/components/about.vue\n -->\n<template>\n  <div class=\"about container\">\n    <button class=\"btn btn-default\">\n      <router-link to=\"/customers\">返回主页</router-link>\n    </button>\n    <button>获取数据</button>\n    <br />\n\n    <h2>购物车</h2>\n    <ul>\n      <li v-for=\"(item,index) in this.list\" :key=\"index\">\n        <div>\n          <h3>{{item.productName}}</h3>\n          <input type=\"checkbox\" v-model=\"item.checked\" /> \n          <span>{{item.produceName}}</span>\n          <button class=\"btn btn-default\" @click=\"editCart('minu',item)\">-</button>\n          <span>{{item.productNum}}</span>\n          <button class=\"btn btn-default\" @click=\"editCart('add',item)\">+</button>\n          <span>价格：{{item.salePrice}}</span>\n          <button @click=\"del(index,item.productId)\" class=\"btn btn-default\">删除</button>\n        </div>\n      </li>\n    </ul>\n    <input type=\"checkbox\" v-model=\"allcheck\" @click=\"checkall\" />\n    <button>合计:{{totalMoney}}</button>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"about\",\n  // 调用app.vue组件中的方法\n  inject: [\"reload\"],\n  data() {\n    return {\n      list: [],\n      allcheck: false\n    };\n  },\n  methods: {\n    async getproduct() {\n      const res = await this.$http.get(\"/goodslist\");\n      this.list = res.data;\n      localStorage.setItem(\"shoppingcart\", JSON.stringify(this.list));\n      console.log(this.list);\n    },\n    editCart(flag,item) {\n      if (flag == \"add\") {\n        // 添加商品数量\n          item.productNum++;\n          console.log(Number(item.productNum) )\n      } else if ((flag ==\"minu\")) {\n        // 减少商品数量\n        if (item.productNum <= 1) {\n          return;\n        }\n        item.productNum--;\n        // console.log(Number(item.productNum) )\n      } else {\n        // 商品控制选中\n        item.checked = item.checked == \"1\" ? \"1\" : \"0\";\n      }\n      this.$http.post(\"/cartEdit\", {\n          productId: item.productId,\n          productNum: item.productNum,\n          checked: item.checked\n        })\n        .then(response => {\n          let res = response.data;\n          console.log(res)\n        });\n        \n    },\n    checkall() {\n      console.log(event.target.checked);\n      this.list.forEach(item => {\n        item.checked = event.target.checked;\n      });\n    },\n    async del(i, id) {\n      const res = await this.$http.delete(\"/cartDel/\"+id);\n      console.log(res);\n      this.reload();\n    }\n  },\n  computed: {\n    totalMoney() {\n      let allmoney = 0;\n      // let isAllCheck = true;\n      for (let i in this.list) {\n        if (this.list[i].checked) {\n\n          allmoney += this.list[i].productNum * this.list[i].salePrice;\n        } else {\n          // isAllCheck = false;\n        }\n      }\n      // this.allcheck == isAllCheck;\n      return allmoney;\n    },\n    ...mapGetters({\n      // 调用getters拿数据,拿到的是express中的data\n      cartinfo: \"GETCART\"\n    })\n  },\n  created() {\n    // this._initPageData()\n    // 发送存数据指令调用actions里的方法，如果没哟这步，是获取不到数据的\n    // 'INITCART'是actions里的[INITCART]的实例\n    // store是main.js里定义的实例化的vuex\n    this.$store.dispatch(\"INITCART\");\n    this.getproduct()\n    \n  },\n  }\n\n</script>\n\n<style>\nli {\n  list-style: none;\n}\n</style>"]}]}